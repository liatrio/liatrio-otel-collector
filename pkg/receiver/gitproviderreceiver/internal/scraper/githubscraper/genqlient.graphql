query getRepoDataBySearch(
    $searchQuery: String!, 
    # @genqlient(pointer: true)
    $repoCursor: String) {
  search(query: $searchQuery, type: REPOSITORY, first: 100, after: $repoCursor) {
    repositoryCount
    edges {
      # @genqlient(typename: "SearchNode")
      node {
        ... on Repository {
          id
          name
          defaultBranchRef {
            name
          }
        }
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

query checkLogin($login: String!){ 
  user(login: $login) {
    login
  }
  organization(login: $login) {
    login
  }
}

query getOrgRepoBranchInformation(
    $login: String!
    # @genqlient(pointer: true)
    $repoCursor: String,
    # @genqlient(pointer: true)
    $branchCursor: String) {
  organization(login: $login) {
    repositories(
        affiliations: OWNER, 
        first: 100, 
        after: $repoCursor, 
        isArchived: false, 
        isFork: false) {
      edges {
        node {
          name
          refs(refPrefix: "refs/heads/", first: 100, after: $branchCursor) {
            totalCount
            nodes {
              name
              target {
                ... on Commit {
                  id
                  history {
                    totalCount
                    edges {
                      node {
                        committedDate
                      }
                    }
                    pageInfo {
                      endCursor
                    }
                  }
                }
              }
            }
            pageInfo {
              endCursor
              startCursor
            }
          }
        }
      }
    }
  }
}

query getUserRepoBranchInformation($login: String!) {
  organization(login: $login) {
    repositories(affiliations: OWNER, first: 10) {
      edges {
        node {
          name
          refs(refPrefix: "refs/heads/", first: 10) {
            totalCount
            nodes {
              name
              target {
                ... on Commit {
                  id
                  history {
                    totalCount
                    edges {
                      node {
                        committedDate
                      }
                    }
                    pageInfo {
                      endCursor
                    }
                  }
                }
              }
            }
            pageInfo {
              endCursor
              startCursor
            }
          }
        }
      }
    }
  }
}
